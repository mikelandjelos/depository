<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ if not .IsHome }}{{ .Title }} — {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

    <!-- Fonts: EB Garamond + JetBrains Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,700;1,400;1,500&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- KaTeX v0.16.33 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.33/dist/katex.min.css" integrity="sha384-fgYS3VC1089n2J3rVcEbXDHlnDLQ9B2Y1hvpQ720q1NvxCduQqT4JoGc4u2QCnzE" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.33/dist/katex.min.js" integrity="sha384-YPHNAPyrxGS8BNnA7Q4ommqra8WQPEjooVSLzFgwgs8OXJBvadbyvx4QpfiFurGr" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.33/dist/contrib/auto-render.min.js" integrity="sha384-JKXHIJf8PKPyDFptuKZoUyMRQJAmQKj4B4xyOca62ebJhciMYGiDdq/9twUUWyZH" crossorigin="anonymous"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false}
            ]
        });"></script>

    <!-- CSS -->
    {{ $css := resources.Get "css/tufte.css" }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    <!-- Syntax highlighting: light theme default, dark theme for dark mode -->
    {{ $syntaxLight := resources.Get "css/syntax-light.css" }}
    {{ $syntaxDark := resources.Get "css/syntax-dark.css" }}
    <link rel="stylesheet" href="{{ $syntaxLight.RelPermalink }}" media="(prefers-color-scheme: light)">
    <link rel="stylesheet" href="{{ $syntaxDark.RelPermalink }}" media="(prefers-color-scheme: dark)">
</head>
<body>
    <header class="site-header">
        <nav>
            <a href="{{ "/" | relURL }}" class="site-name">{{ .Site.Title }}</a>
            <div class="nav-links">
                {{ range .Site.Menus.main }}
                    <a href="{{ .URL | relURL }}">{{ .Name }}</a>
                {{ end }}
            </div>
        </nav>
    </header>

    <main>
        {{ block "main" . }}{{ end }}
    </main>

    <footer class="site-footer">
        <p>{{ .Site.Params.footer | default "&copy; 2026" | safeHTML }}
        {{ with .Site.Params.repoURL }} · <a href="{{ . }}">Source</a>{{ end }}</p>
    </footer>
</body>
</html>
